{{ $wed := .eventsByDay.Wednesday}}
{{ $thurs := .eventsByDay.Thursday}}
{{ $fri := .eventsByDay.Friday}}
{{ $sat := .eventsByDay.Saturday}}
{{ $sun := .eventsByDay.Sunday}}

{{ define "eventBlurb" }}

    {{ if .events }}
        <div>
            <h3>{{ .day }}</h3>
            {{ range $e := .events }}
                <div style="padding-left: 3em;">
                    <ul class="list-unstyled">
                        <li>
                            <strong>
                                {{ $e.StartTime.Format "03:04 PM" }} - {{ $e.EndTime.Format "03:04 PM" }}
                            </strong>: <a href="/event/{{ $e.EventId }}">{{ $e.EventId }}</a>
                            {{ $e.Title }} (<a href="{{ $e.GenconLink }}">Official Listing</a>)</li>
                        <li style="padding-left: 2em">{{ $e.ShortDescription }}</li>
                    </ul>
                </div>
            {{ end }}
        </div>
    {{ end }}

{{ end }}

{{ define "categoryEvent" }}
    {{ if .events }}

    <h3>{{ .fullCat }}</h3>

    {{ range $e := .events }}
    <div style="padding-left: 3em;">
        <ul class="list-unstyled">
            <li><strong>
                    {{ $e.StartTime.Format "Monday" }}
                    {{ $e.StartTime.Format "03:04 PM" }} - {{ $e.EndTime.Format "03:04 PM" }}
                </strong>: <a href="/event/{{ $e.EventId }}">{{ $e.EventId }}</a>
                {{ $e.Title }} (<a href="{{ $e.GenconLink }}">Official Listing</a>)
            </li>
            <li>{{ if $e.GameSystem }}{{ $e.GameSystem }} {{ $e.RulesEdition }}{{ end }}</li>
            <li style="padding-left: 2em">{{ $e.ShortDescription }}</li>
        </ul>
    </div>
    {{ end }}
    {{ end }}
{{ end }}

<html>
<head>
    {{ template "header" "Gencon Events"}}
</head>

<body>
{{ template "navbar" .context }}

<div class="container">
<h1 class="page-header">Starred Events</h1>
<div class="row">
    <div class="main">

        <ul class="nav nav-tabs nav-justified" id="starredgroup">
            <li><a href="#calendar-tab" data-toggle="tab" shape="rect">Calendar</a></li>
            <li><a href="#day-tab" data-toggle="tab" shape="rect">By day</a></li>
            <li class="active"><a href="#type-tab" data-toggle="tab" shape="rect">By type</a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
            <div class="tab-pane" id="day-tab">
                {{ template "eventBlurb" (dict "events" $wed "day" "Wednesday") }}
                {{ template "eventBlurb" (dict "events" $thurs "day" "Thursday") }}
                {{ template "eventBlurb" (dict "events" $fri "day" "Friday") }}
                {{ template "eventBlurb" (dict "events" $sat "day" "Saturday") }}
                {{ template "eventBlurb" (dict "events" $sun "day" "Sunday") }}
            </div>
            <div class="tab-pane active" id="type-tab">
                {{ template "categoryEvent" (dict "events" .eventsByCategory.ANI "fullCat" "ANI - Anime Activities") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.BGM "fullCat" "BGM - Board Games") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.CGM "fullCat" "CGM - Non-Collectable/Tradable Card Games") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.EGM "fullCat" "EGM - Electronic Games") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.ENT "fullCat" "ENT - Entertainment Events") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.FLM "fullCat" "FLM - Film Fest") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.HMN "fullCat" "HMN - Historical Miniatures") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.KID "fullCat" "KID - Kids Activities") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.LRP "fullCat" "LRP - Larps") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.MHE "fullCat" "MHE - Miniature Hobby Events") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.NMN "fullCat" "NMN - Non-Historical Miniatures") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.RPG "fullCat" "RPG - Role Playing Games") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.RPGA "fullCat" "RPGA - Role Playing Game Association") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.SEM "fullCat" "SEM - Seminiars") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.SPA "fullCat" "SPA - Spousal Activities") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.TCG "fullCat" "TCG - Tradeable Card Game") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.TDA "fullCat" "TDA - True Dungeon") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.TRD "fullCat" "TRD - Trade Day Events") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.WKS "fullCat" "WKS - Workshop") }}
                {{ template "categoryEvent" (dict "events" .eventsByCategory.ZED "fullCat" "ZED - Isle of Misfit Events") }}
            </div>
            <div class="tab-pane" id="calendar-tab">
                <h2>TODO add calendar</h2>
            </div>
        </div>
    </div>
</div>
</div>
{{ template "scriptFooter" }}
</body>

</html>